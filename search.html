<!DOCTYPE html>
<html>
    <head>
         <script src="//ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>
         <script>
             window.onload = function() 
             {
                document.getElementById("search").onclick = 
                function() // fetch data
                {
                     // Exercise #3 - Lookup any word entered into the textbox
                    var searchText = document.getElementById("term").value;
                    // Exercise #4
                    new Ajax.Updater('result','request.php?q='+searchText+'&all=true',{method: 'get', onSuccess: displayResult});
                    
                   /* new Ajax.Request("request.php?q=definition",
                       {
                          method: "get",
                          onSuccess: displayResult
                       } ); #Exercise 2*/ 
                 };
                
                function displayResult(data)
                {
                    // alert(data.responseText); #Exercise2 
                    
                    // Exercise #4
                    
                    // Create an ordered list
                    var ordList = document.createElement('ol');
                    
                    // Get elements
                    var xml = data.responseXML;
                    var defArray = xml.getElementsByTagName('definition');
                    var exampleArray = xml.getElementsByTagName('example');
                    var authorArray = xml.getElementsByTagName('author');
                    
                    // For each definition add an item to the list
                    for ( var i = 0; i < defArray.length; i++)
                    {
                       var listItem = document.createElement('li'); 
                        console.log(listItem);
                       // Insert three new paragraphs into each definition's li
                       var para1 = document.createElement('p');
                        // the definition text
                       para1.appendChild(defArray[i].getAttribute('name') + defArray[i].firstChild.nodeValue );
                       console.log(defArray[i].getAttribute('name') + defArray[i].firstChild.nodeValue);
                       listItem.appendChild(para1);
                       
                       var para2 = document.createElement('p') + document.createElement('br');
                       // the word's example usage (give it a className of "example")
                       exampleArray[i].className = 'example';
                       para2.appendChild(exampleArray[i].innerHTML);
                       console.log(exampleArray[i].innerHTML);
                       listItem.appendChild(para2);
                       
                       var para3 = document.createElement('p');
                       // the author who submitted the definition (preceded by a dash)
                       para3.appendChild(authorArray[i].innerHTML);
                       listItem.appendChild(para3);
                       
                       ordList.appendChild(listItem);
                    }
                    console.log(exampleArray);
                    
                }
              };                        

       </script>
        <title>Search Dictionary</title>
    </head>
    <body>
            <div id="controls">
                Term: <input type="text" id="term" />
                <button id="search">Lookup</button>
            </div>
            <div id="result">  <!-- placing definition here -->  </div>

    </body>
</html>
       